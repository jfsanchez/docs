
<!doctype html>
<html lang="gl" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Jose Sánchez">
      
      
        <link rel="canonical" href="https://jfsanchez.es/docker-1-my-maria/">
      
      
        <link rel="prev" href="../docker-0-base-simple/">
      
      
        <link rel="next" href="../docker-4-postgresql/">
      
      
      <link rel="icon" href="../images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>🧾 MySQL / MariaDB - JFSanchez</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../_res/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mysql-mariadb" class="md-skip">
          Ir ao contido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabeceira">
    <a href=".." title="JFSanchez" class="md-header__button md-logo" aria-label="JFSanchez" data-md-component="logo">
      
  <img src="../images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            JFSanchez
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              🧾 MySQL / MariaDB
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Modo oscuro (da calambre)"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Modo oscuro (da calambre)" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Modo normal"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Modo normal" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Procura" placeholder="Procura" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Procurar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpar" aria-label="Limpar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando procura
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/jfsanchez/" title="Ir ao repositorio" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="JFSanchez" class="md-nav__button md-logo" aria-label="JFSanchez" data-md-component="logo">
      
  <img src="../images/logo.png" alt="logo">

    </a>
    JFSanchez
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/jfsanchez/" title="Ir ao repositorio" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    📚 Inicio — Presentacións
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    👷 Contorno/Configuracións
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            👷 Contorno/Configuracións
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../conda-0-config-basica/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🐍 Contorno BigData
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../windows-wsl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🐧 WSL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker-0-base-simple/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🔵 Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" checked>
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    🐳 Bases de Datos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            🐳 Bases de Datos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    🧾 MySQL / MariaDB
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    🧾 MySQL / MariaDB
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Táboa de contidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Táboa de contidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#instalacion" class="md-nav__link">
    <span class="md-ellipsis">
      Instalación
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recuperar-instancia-de-mysql-co-seu-volume" class="md-nav__link">
    <span class="md-ellipsis">
      Recuperar instancia de MySQL co seu volume
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cli-conexion-directa-co-cliente" class="md-nav__link">
    <span class="md-ellipsis">
      (CLI) Conexión directa co cliente
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gui-conectar-a-mariadbmysql-con-dbeaver" class="md-nav__link">
    <span class="md-ellipsis">
      (GUI) Conectar a MariaDB/MySQL con DBeaver
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comandos-basicos" class="md-nav__link">
    <span class="md-ellipsis">
      Comandos básicos
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crear-usuario-bbdd-e-permisos" class="md-nav__link">
    <span class="md-ellipsis">
      Crear usuario, BBDD e permisos
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importar-bbdd-de-proba" class="md-nav__link">
    <span class="md-ellipsis">
      Importar BBDD de proba
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backup-con-mysqldump" class="md-nav__link">
    <span class="md-ellipsis">
      Backup con MySQLdump
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conectar-a-mysql-dende-python" class="md-nav__link">
    <span class="md-ellipsis">
      Conectar a MySQL dende Python
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adicional" class="md-nav__link">
    <span class="md-ellipsis">
      Adicional
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker-4-postgresql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🧾 PostgreSQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker-2-mongodb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🧾 MongoDB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker-3-redis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🧾 Redis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker-5-mssql-server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🧾 Microsoft SQL Server
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker-6-oracle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🧾 Oracle Free
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dbeaver-tunel-ssh/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🦫 DBeaver e túneles SSH
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ssh-0-chaves-tuneles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🔑 SSH e túneles
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../amazon-corretto-java-0-instalacion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ☕ Java/OpenJDK/Corretto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../python-1-maxias/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🪄 Ipython máxico
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../python-0-conceptos-previos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🗂️ Arquivos en Python
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker-z-guia-refinitiva/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    📘 Docker ++
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../apache-hadoop-0-instalacion/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    🐘 Apache Hadoop
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../apache-spark-0-instalacion/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    ⚝ Apache Spark
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../apache-kafka-0-instalacion-docker/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    ➿ Apache Kafka
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../apache-nifi-0-instalacion/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    💧 Apache NIFI
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../apache-sqoop-0-resumo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇸 Apache Sqoop
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../apache-airflow-0-instalacion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🍀 Apache Airflow
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../apache-superset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ♾️ Apache Superset
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../nube-0-intro/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    ☁️ Nube/Cloud/Openstack
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../powerbi-0-python/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    📶 Microsoft PowerBi
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/jfsanchez/docencia/tree/main/libreta" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🗒️ Plantillas docencia
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Táboa de contidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Táboa de contidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#instalacion" class="md-nav__link">
    <span class="md-ellipsis">
      Instalación
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recuperar-instancia-de-mysql-co-seu-volume" class="md-nav__link">
    <span class="md-ellipsis">
      Recuperar instancia de MySQL co seu volume
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cli-conexion-directa-co-cliente" class="md-nav__link">
    <span class="md-ellipsis">
      (CLI) Conexión directa co cliente
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gui-conectar-a-mariadbmysql-con-dbeaver" class="md-nav__link">
    <span class="md-ellipsis">
      (GUI) Conectar a MariaDB/MySQL con DBeaver
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comandos-basicos" class="md-nav__link">
    <span class="md-ellipsis">
      Comandos básicos
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crear-usuario-bbdd-e-permisos" class="md-nav__link">
    <span class="md-ellipsis">
      Crear usuario, BBDD e permisos
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importar-bbdd-de-proba" class="md-nav__link">
    <span class="md-ellipsis">
      Importar BBDD de proba
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backup-con-mysqldump" class="md-nav__link">
    <span class="md-ellipsis">
      Backup con MySQLdump
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conectar-a-mysql-dende-python" class="md-nav__link">
    <span class="md-ellipsis">
      Conectar a MySQL dende Python
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adicional" class="md-nav__link">
    <span class="md-ellipsis">
      Adicional
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="mysql-mariadb">🧾 MySQL / MariaDB</h1>
<p><img alt="Logo MariaDB" src="../images/mysql-server-docker/mariadb-logo.svg#derecha" title="Logo MariaDB" /></p>
<ul>
<li>Baseado nas imaxes oficiais:<ul>
<li>MySQL: <a href="https://hub.docker.com/_/mysql">https://hub.docker.com/_/mysql</a></li>
<li>MariaDB: <a href="https://hub.docker.com/_/mariadb">https://hub.docker.com/_/mariadb</a></li>
</ul>
</li>
</ul>
<h3 id="instalacion">Instalación</h3>
<p>É recomendable crear previamente un volume cun nome para ter localizado onde temos os datos e que non se borre se executamos un <code>docker volume prune</code>.</p>
<p>Tamén imos crear un directorio compartido, deste xeito resultará máis fácil importar as bases de datos de proba sen ter que instalar outro cliente ou ter problemas por non estar no directorio correcto durante a importación.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>docker<span class="w"> </span>volume<span class="w"> </span>create<span class="w"> </span>bbddvol
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="nv">$HOME</span>/bd
</span></code></pre></div>
<p>Agora creamos o contedor. O volume estará asociado ao directorio coa base de datos:</p>
<p>⚠️ Emprega o botón copiar da dereita para que non fallen os saltos de liñas e caracteres especiais nas diferentes terminais.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">MySQL</label><label for="__tabbed_1_2">MariaDB</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span><span class="m">9906</span>:3306<span class="w"> </span>--name<span class="w"> </span>bbdd<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">  </span>-v<span class="w"> </span>bbddvol:/var/lib/mysql<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">  </span>-v<span class="w"> </span><span class="nv">$HOME</span>/bd:/bd<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">  </span>-e<span class="w"> </span><span class="nv">MYSQL_RANDOM_ROOT_PASSWORD</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">  </span>-e<span class="w"> </span><span class="nv">MYSQL_DATABASE</span><span class="o">=</span>basededatos<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">  </span>-e<span class="w"> </span><span class="nv">MYSQL_USER</span><span class="o">=</span>usuario<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">  </span>-e<span class="w"> </span><span class="nv">MYSQL_PASSWORD</span><span class="o">=</span>ContrasinalMariano123.<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">  </span>--restart<span class="w"> </span>unless-stopped<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">  </span>-d<span class="w"> </span>mysql:8
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span><span class="m">9906</span>:3306<span class="w"> </span>--name<span class="w"> </span>bbdd<span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">  </span>-v<span class="w"> </span>bbddvol:/var/lib/mysql<span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">  </span>-v<span class="w"> </span><span class="nv">$HOME</span>/bd:/bd<span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">  </span>-e<span class="w"> </span><span class="nv">MARIADB_RANDOM_ROOT_PASSWORD</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">  </span>-e<span class="w"> </span><span class="nv">MARIADB_DATABASE</span><span class="o">=</span>basededatos<span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">  </span>-e<span class="w"> </span><span class="nv">MARIADB_USER</span><span class="o">=</span>usuario<span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">  </span>-e<span class="w"> </span><span class="nv">MARIADB_PASSWORD</span><span class="o">=</span>ContrasinalMariano123.<span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">  </span>--restart<span class="w"> </span>unless-stopped<span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">  </span>-d<span class="w"> </span>mariadb:latest
</span></code></pre></div>
</div>
</div>
</div>
<p><strong>Aclaracións</strong>:</p>
<ul>
<li><code>-p 9906:3306</code> redirixe o porto <code>9906</code> do anfitrión ao porto <code>3306</code> do contedor.</li>
<li><code>--env</code> ou <code>-e</code> serven para definir variables de entorno (configuración) presentes na imaxe.</li>
<li><code>-v</code> permite asociar (montar) un directorio local a un directorio de dentro do contedor. Poderíamos asociado un directorio local <code>/home/user/mysqldatos</code> ao contedor en <code>/var/lib/mysql</code> co parámetro: <code>-v /home/user/mysqldatos:/var/lib/mysql</code>. Tamén poderíamos mapear un volume anterior con: <code>-v ID_DO_VOLUME:/var/lib/mysql</code>.</li>
<li><code>--restart unless-stopped</code> Recupera no reinicio o estado do contedor (volve arrancalo) salvo que se parase explícitamente.</li>
<li><code>-d</code> Executa o contedor en modo dettached (devolve o control á consola tras a súa execución).</li>
</ul>
<p>⚠️⚠️⚠️ <strong>NON ESQUEZAS APUNTAR O CONTRASINAL DE ROOT</strong>:</p>
<p>Para saber o contrasinal de root asignado aleatoriamente debemos buscar nos logs unha liña que conteña: <code>"[Note] [Entrypoint]: GENERATED ROOT PASSWORD:"</code>. Tras executar o contedor, dalle 20 segundos para que arranque de todo e executa:</p>
<p><div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>docker<span class="w"> </span>logs<span class="w"> </span>bbdd
</span></code></pre></div>
Tamén precisaremos o enderezo IP do contedor, pódelo averiguar con:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>docker<span class="w"> </span>inspect<span class="w"> </span>bbdd
</span></code></pre></div>
<p>E buscar a liña "IPAddress": "XXX.XXX.XXX.XXX" dentro de <strong>"NetworkSettings"</strong> (as X son números).</p>
<p>Apunta nun arquivo o enderezo IP e o contrasinal de root. Vas necesitalo varias veces!</p>
<p>Se estás executando unha instancia ou máquina, tamén é conveniente que averigues e apuntes o seu enderezo IP.</p>
<p>Por último comprobamos que teñamos correctamente asociado o volume de datos ao noso contedor:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>docker<span class="w"> </span>ps<span class="w"> </span>-a<span class="w"> </span>--no-trunc<span class="w"> </span>--format<span class="w"> </span><span class="s2">&quot;{{.Names}}: {{.Mounts}}&quot;</span>
</span></code></pre></div>
<h3 id="recuperar-instancia-de-mysql-co-seu-volume">Recuperar instancia de MySQL co seu volume</h3>
<p>Se queremos recuperar unha instancia borrada, sempre e cando non borrásemos o seu volume de datos, anterior (non fai falta especificar usuarios ou contrasinais):</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">MySQL</label><label for="__tabbed_2_2">MariaDB</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span><span class="m">9906</span>:3306<span class="w"> </span>--name<span class="w"> </span>bbdd<span class="w"> </span><span class="se">\</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">  </span>-v<span class="w"> </span>bbddvol:/var/lib/mysql<span class="w"> </span><span class="se">\</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">  </span>-v<span class="w"> </span><span class="nv">$HOME</span>/bd:/bd<span class="w"> </span><span class="se">\</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">  </span>--restart<span class="w"> </span>unless-stopped<span class="w"> </span><span class="se">\</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">  </span>-d<span class="w"> </span>mysql:8
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span><span class="m">9906</span>:3306<span class="w"> </span>--name<span class="w"> </span>bbdd<span class="w"> </span><span class="se">\</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">  </span>-v<span class="w"> </span>bbddvol:/var/lib/mysql<span class="w"> </span><span class="se">\</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">  </span>-v<span class="w"> </span><span class="nv">$HOME</span>/bd:/bd<span class="w"> </span><span class="se">\</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">  </span>--restart<span class="w"> </span>unless-stopped<span class="w"> </span><span class="se">\</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">  </span>-d<span class="w"> </span>mariadb:latest
</span></code></pre></div>
</div>
</div>
</div>
<h3 id="cli-conexion-directa-co-cliente">(CLI) Conexión directa co cliente</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="3:4"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><input id="__tabbed_3_3" name="__tabbed_3" type="radio" /><input id="__tabbed_3_4" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Conectar co cliente do docker (MySQL)</label><label for="__tabbed_3_2">Conectar cun cliente doutro host (MySQL)</label><label for="__tabbed_3_3">Conectar co cliente do docker (MariaDB)</label><label for="__tabbed_3_4">Conectar cun cliente doutro host (MariaDB)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>bbdd<span class="w"> </span>mysql<span class="w"> </span>-uusuario<span class="w"> </span>-pContrasinalMariano123.
</span></code></pre></div>
<ul>
<li>Podemos engadir <code>-hX.X.X.X</code> para conectar con outro equipo.</li>
</ul>
</div>
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>mysql<span class="w"> </span>-hX.X.X.X<span class="w"> </span>-P9906<span class="w"> </span>-uusuario<span class="w"> </span>-pContrasinalMariano123.
</span></code></pre></div>
<ul>
<li><code>X.X.X.X</code> é a IP do servidor ao que queremos conectar.</li>
</ul>
</div>
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>bbdd<span class="w"> </span>mariadb<span class="w"> </span>-uusuario<span class="w"> </span>-pContrasinalMariano123.
</span></code></pre></div>
<ul>
<li>Podemos engadir <code>-hX.X.X.X</code> para conectar con outro equipo.</li>
</ul>
</div>
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>mariadb<span class="w"> </span>-hX.X.X.X<span class="w"> </span>-P9906<span class="w"> </span>-uusuario<span class="w"> </span>-pContrasinalMariano123.
</span></code></pre></div>
<ul>
<li><code>X.X.X.X</code> é a IP do servidor ao que queremos conectar.</li>
</ul>
</div>
</div>
</div>
<p><strong>Nota</strong>: Dende consola, en caso de certos caracteres especiais, pódense escapar con barra invertida ou poñer todo o contrasinal entre comillas simples.</p>
<h2 id="gui-conectar-a-mariadbmysql-con-dbeaver">(GUI) Conectar a MariaDB/MySQL con DBeaver</h2>
<p>Se queremos conectar dende DBeaver na nosa máquina local e temos instalado o contedor de MariaDB/MySQL nunha máquina remota, tampouco debemos esquecer configurar o porto:</p>
<p><img alt="Configuración DBeaver" src="../images/mysql-server-docker/dbeaver.png" title="Opciones de conexión en DBeaver" /></p>
<p>Na lapela Driver properties lembra mudar o valor de <strong>allowPublicKeyRetrieval</strong> a <strong>TRUE</strong> posto que é necesario no caso de empregar cifrado. Segundo a configuración, pode ser necesario.</p>
<p>Podes acceder a un manual máis detallado en <a href="https://jfsanchez.es/docs/dbeaver-tunel-ssh/">🦫 DBeaver e túneles SSH</a> onde tamén aprenderás como realizar un túnel SSH. Este túnel pode ser necesario si o servidor de base de datos está detrás dun firewall.</p>
<h2 id="comandos-basicos">Comandos básicos</h2>
<ul>
<li>Ver as bases de datos:
    <div class="language-sql highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="k">show</span><span class="w"> </span><span class="n">databases</span><span class="p">;</span>
</span></code></pre></div></li>
<li>Seleccionar unha base de datos:
     <div class="language-sql highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="n">use</span><span class="w"> </span><span class="k">database</span><span class="p">;</span>
</span></code></pre></div></li>
<li>Ver as táboas da BBDD actual seleccionada:
     <div class="language-sql highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="k">show</span><span class="w"> </span><span class="n">tables</span><span class="p">;</span>
</span></code></pre></div></li>
<li>Ver información do estado do servidor:
    <div class="language-text highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>\s
</span></code></pre></div></li>
<li>Saír do cliente. Tamén funcionaría: <code>quit</code> ou <code>Crtl+D</code>:
    <div class="language-text highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>\q
</span></code></pre></div></li>
<li>Executar un arquivo .sql (útil para recuperar un backup)
    <div class="language-sql highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="k">source</span><span class="w"> </span><span class="o">/</span><span class="n">ruta</span><span class="o">/</span><span class="n">ao</span><span class="o">/</span><span class="n">arquivo</span><span class="p">.</span><span class="k">sql</span>
</span></code></pre></div></li>
</ul>
<h2 id="crear-usuario-bbdd-e-permisos">Crear usuario, BBDD e permisos</h2>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">USER</span><span class="w"> </span><span class="s1">&#39;usuario-a-crear&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span><span class="w"> </span><span class="n">IDENTIFIED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">&#39;contrasinal-abc123.&#39;</span><span class="p">;</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="k">GRANT</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">base</span><span class="o">-</span><span class="n">de</span><span class="o">-</span><span class="n">datos</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="s1">&#39;usuario-a-crear&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span><span class="p">;</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="n">FLUSH</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="p">;</span>
</span></code></pre></div>
<h2 id="importar-bbdd-de-proba">Importar BBDD de proba</h2>
<p>Debes saber o contrasinal de root (mira arriba).</p>
<p>Este exemplo funciona se seguiches as instruccións e hai un directorio compartido no contedor.</p>
<p>Descargamos dende a máquina as dúas bases de datos de proba</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/bd
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>wget<span class="w"> </span>https://github.com/datacharmer/test_db/releases/download/v1.0.7/test_db-1.0.7.tar.gz
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>wget<span class="w"> </span>https://downloads.mysql.com/docs/world-db.tar.gz
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>tar<span class="w"> </span>-xzf<span class="w"> </span>test_db-1.0.7.tar.gz
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>tar<span class="w"> </span>-xzf<span class="w"> </span>world-db.tar.gz
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="nb">cd</span><span class="w"> </span>test_db
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>bbdd<span class="w"> </span>/bin/bash
</span></code></pre></div>
<p>Agora estamos dentro do docker, conectamos co cliente:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">MySQL</label><label for="__tabbed_4_2">MariaDB</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="nb">cd</span><span class="w"> </span>/bd/test_db
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>mysql<span class="w"> </span>-hlocalhost<span class="w"> </span>-uroot<span class="w"> </span>-p
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="nb">cd</span><span class="w"> </span>/bd/test_db
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>mariadb<span class="w"> </span>-hlocalhost<span class="w"> </span>-uroot<span class="w"> </span>-p
</span></code></pre></div>
</div>
</div>
</div>
<p>Escribe o contrasinal que tes apuntado para acceder e entrarás na consola de MySQL/MariaDB, despois executa os scripts para crear as bases de datos, os usuarios e dar permisos.</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="k">SOURCE</span><span class="w"> </span><span class="n">employees</span><span class="p">.</span><span class="k">sql</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">USER</span><span class="w"> </span><span class="s1">&#39;empregado&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span><span class="w"> </span><span class="n">IDENTIFIED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">&#39;Exemplar.123&#39;</span><span class="p">;</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="k">GRANT</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">employees</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="s1">&#39;empregado&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span><span class="p">;</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="k">SOURCE</span><span class="w"> </span><span class="p">..</span><span class="o">/</span><span class="n">world</span><span class="o">-</span><span class="n">db</span><span class="o">/</span><span class="n">world</span><span class="p">.</span><span class="k">sql</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">USER</span><span class="w"> </span><span class="s1">&#39;mundo&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span><span class="w"> </span><span class="n">IDENTIFIED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">&#39;MundoMundial.456&#39;</span><span class="p">;</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="k">GRANT</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">world</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="s1">&#39;mundo&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span><span class="p">;</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="n">FLUSH</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="p">;</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="k">SHOW</span><span class="w"> </span><span class="n">DATABASES</span><span class="p">;</span>
</span></code></pre></div>
<p><strong>Webgrafía</strong>:</p>
<ul>
<li><a href="https://dev.mysql.com/doc/employee/en/employees-installation.html">https://dev.mysql.com/doc/employee/en/employees-installation.html</a> (<a href="https://github.com/datacharmer/test_db">https://github.com/datacharmer/test_db</a>)</li>
<li><a href="https://downloads.mysql.com/docs/world-db.tar.gz">https://downloads.mysql.com/docs/world-db.tar.gz</a></li>
</ul>
<h2 id="backup-con-mysqldump">Backup con MySQLdump</h2>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Backup dunha BBDD</label><label for="__tabbed_5_2">Backup de todas as BBDD</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>mysqldump<span class="w"> </span>-uUSUARIO<span class="w"> </span>-pCLAVE<span class="w"> </span>--databases<span class="w"> </span>BASE_DATOS<span class="w"> </span>&gt;<span class="w"> </span>YYYY-mm-dd_mysql_backup.sql
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>mysqldump<span class="w"> </span>-uUSUARIO<span class="w"> </span>-pCLAVE<span class="w"> </span>--all-databases<span class="w"> </span>&gt;<span class="w"> </span>YYYY-mm-dd_mysql_backup.sql
</span></code></pre></div>
</div>
</div>
</div>
<h2 id="conectar-a-mysql-dende-python">Conectar a MySQL dende Python</h2>
<ul>
<li><a href="https://github.com/jfsanchez/SBD/blob/main/notebooks/bbdd/mysql.ipynb">https://github.com/jfsanchez/SBD/blob/main/notebooks/bbdd/mysql.ipynb</a></li>
</ul>
<p>⚠️ <strong>AVISO</strong>: Esta configuración NON pretende ser segura, o seu obxectivo é montar de xeito rápido un contorno para a aprendizaxe. Entre outras cousas deberíamos deshabilitar o usuario root para conexións remotas, borrar as BBDD de proba e impedir o acceso directo ao servidor de base de datos.</p>
<h2 id="adicional">Adicional</h2>
<p><strong>Envío de arquivo a servidor remoto por scp</strong></p>
<p>Se estiveras a conectar a un servidor remoto que non permite descargar arquivos externos, deberás baixar o script en local e logo copialo ao servidor:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>scp<span class="w"> </span>-i<span class="w"> </span>chave-ssh.key<span class="w"> </span>employees_db-full-1.0.7.tar.gz<span class="w"> </span>usuario@IP-DO-SERVIDOR:/tmp/
</span></code></pre></div>
<p><strong>Problemas de versión (engine)</strong></p>
<p>Se estás a traballar coa versión: employees_db-full-1.0.6.tar.bz2 pode ser que teñas algún problema co <strong>engine</strong>. Neste caso, engadir "default_" diante das dúas liñas en employees.sql axuda. Fonte: <a href="https://stackoverflow.com/questions/36322903/error-1193-when-following-employees-database-install-tutorial-with-mysql-5-7-1">stackoverflow</a>.</p>
<p><strong>Porto aberto?</strong></p>
<p>En GNU/Linux podes ver qué portos están abertos con:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>netstat<span class="w"> </span>-atun
</span></code></pre></div>
<p>En docker podes ver as redireccións de portos don <code>docker inspect</code>.</p>
<p>No caso de instalación con docker, se ves que non tes aberto o 9906/9907 (segundo o exemplo) no anfitrión ou o 3306 onde teñas MySQL, probablemente debas cambiar o bind-address na configuración de MySQL ou MariaDB.</p>
<p>Edita o arquivo correspondente (en MySQL: /etc/mysql/mysql.conf.d/mysqld.cnf) e mete ou descomenta esta liña:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>bind-address por 0.0.0.0
</span></code></pre></div>
<p>Ollo! Si é que non conectas ao porto 3306 pero o ves aberto, moi probablemente estea filtrado no firewall (na computación na nube ás veces filtran ese porto aínda que tí o abras explícitamente).</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Volver ao principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      2025 - Jose Sánchez
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "content.code.annotate", "navigation.indexes", "toc.follow", "navigation.top", "navigation.path", "navigation.prune"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado no cortapapeis", "clipboard.copy": "Copiar no cortapapeis", "search.result.more.one": "1 m\u00e1is nesta p\u00e1xina", "search.result.more.other": "# m\u00e1is nesta p\u00e1xina", "search.result.none": "Sen resultados", "search.result.one": "1 resultado atopado", "search.result.other": "# resultados atopados", "search.result.placeholder": "Insira un termo", "search.result.term.missing": "Falta", "select.version": "Seleccionar version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>